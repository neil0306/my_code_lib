# 创建自定义全局命令
1. 在项目根目录下创建一个`bin`文件夹，然后在`bin`文件夹下创建一个`cli.js`文件，内容如下：
    > 这里的根目录用 `mylci` 为例

2. 在项目根目录下利用 `npm init` 初始化一个项目，此时会看到一个`package.json`文件，然后在`package.json`文件中添加一个`bin`字段，内容如下
    ```json
    {
    "name": "mycli",
    "version": "1.0.0",
    "main": "index.js",
    "bin": {                        // 由于第一步创建了 bin 目录以及 cli.js 文件，所以这里才会出现这个字段
        "mycli": "bin/cli.js"
    },
    "scripts": {
        "test": "echo \"Error: no test specified\" && exit 1"
    },
    "author": "",
    "license": "ISC",
    "description": ""
    }
    ```

3. 创建全局的命令，实现逻辑是`将当前项目的根目录连接到 npm 的全局目录下`
    ```shell
    cd 项目根目录
    npm link
    ```
    ![](1_创建自定义全局指令_images/npm_link_创建全局命令.png)

4. 在`mycli/bin/cli.js`文件中添加如下代码
    ```js
    #!/usr/bin/env node      // 这行代码是告诉系统，此文件需要借助 /usr/bin/env 里的 node 环境才能执行; 不可以缺少这行代码!!
    
    console.log('mycli');    // 测试是否能在任意目录中执行
    ```

5. 在 `cli.js` 中定义想要执行的命令
    ```md
    使用系统自带的方法获取命令行参数：`process.argv`
    
    - 测试的时候可以用 console.log(process.argv) 查看
        [
        '/opt/homebrew/Cellar/node/23.6.1/bin/node',    // 执行命令的环境
        '/opt/homebrew/bin/mycli',                      // 脚本所在位置
        '--help'                                        // 这里的 --help 是在命令行中输入的参数
        ]
    ```
